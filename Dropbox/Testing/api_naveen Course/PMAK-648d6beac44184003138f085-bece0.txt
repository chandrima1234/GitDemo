PMAK-648d6beac44184003138f085-bece0872083ec237f33aa64f15bd32fd6d

postman login --with-api-key PMAK-648d6beac44184003138f085-bece0872083ec237f33aa64f15bd32fd6d
postman collection run 19737020-1b9485be-130b-4d80-8c68-aa52f147b031 -e 19737020-df2255dd-bed8-45a5-9cfd-afd0c225c692


auth https://restful-booker.herokuapp.com/auth

{
    "username" : "admin",
    "password" : "password123"
}


Get https://restful-booker.herokuapp.com/booking


var template = `
    <table bgcolor="#FFFFFH">
        <tr bgcolor="#ff7f39">  
            <th>Booking ID</th>
            
        </tr>
         {{#each response}}
            <tr>
                <td>{{bookingid}}</td>
                

            </tr>
        {{/each}}
    </table>
`;

pm.visualizer.set(template, {
    response : pm.response.json()
});

pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});






post {
    "firstname" : "Jim",
    "lastname" : "Brown",
    "totalprice" : 111,
    "depositpaid" : true,
    "bookingdates" : {
        "checkin" : "2018-01-01",
        "checkout" : "2019-01-01"
    },
    "additionalneeds" : "Breakfast"
}





test 
const responseData = pm.response.json();
const bookingId = responseData.bookingid;
console.log("new booking id ====>" + bookingId);
pm.variables.set("booking_id", bookingId);



put {
    "firstname" : "James",
    "lastname" : "Brown",
    "totalprice" : 111,
    "depositpaid" : true,
    "bookingdates" : {
        "checkin" : "2018-01-01",
        "checkout" : "2019-01-01"
    },
    "additionalneeds" : "Breakfast"
}

pm.sendRequest({
    url: 'https://restful-booker.herokuapp.com/auth',
    method: 'POST',
    header:{
        'Content-Type': 'application/json',
    },
    body:{
        mode: 'raw',
        raw: JSON.stringify({
                 "username" : "admin",
                 "password" : "password123"
        })
    }
}, function(err, response){
    if(err){
        console.log(err);
        return;
    }
    else{
       const authResponse = response.json();
       console.log(authResponse);
       const tokenId = authResponse.token;
       console.log("Token id ===>" + tokenId);
       pm.variables.set("token_id", "token="+tokenId);
    }
}


)
Cookie {{token_id}}
https://restful-booker.herokuapp.com/booking



pm.sendRequest({
    url: 'https://restful-booker.herokuapp.com/auth',
    method: 'POST',
    header:{
        'Content-Type': 'application/json',
    },
    body:{
        mode: 'raw',
        raw: JSON.stringify({
                 "username" : "admin",
                 "password" : "password123"
        })
    }
}, function(err, response){
    if(err){
        console.log(err);
        return;
    }
    else{
       const authResponse = response.json();
       console.log(authResponse);
       const tokenId = authResponse.token;
       console.log("Token id ===>" + tokenId);
       pm.variables.set("token_id", "token="+tokenId);
    }
}


)